ARG VERSION=latest

FROM alpine:${VERSION} as build

RUN apk update && \
    apk add vlc

RUN adduser -D vlcuser

COPY fragment.mp4 .

USER vlcuser

CMD cvlc -vvv "fragment.mp4" --play-and-exit --sout '#standard{access=http,mux=ts,dst=0.0.0.0:8080}'